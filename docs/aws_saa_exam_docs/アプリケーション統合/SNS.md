# SNS

![](2024-08-26-16-35-17.png)


2. **Amazon SNSの特徴**
   - フルマネージドのメッセージングサービスで、システム間の通知やデータ連携に使用される。
   - **プッシュ型**の通知サービスで、サブスクライバーの状態に関わらずメッセージを配信可能。

3. **ユースケース**
   - 例えば、**Amazon CloudWatch**でリソース（例: EC2インスタンス）を監視し、その状態に変化があった際に、SNSを使ってメールで通知するケースがある。
   - SNSトピックを作成し、それをCloudWatch Events（Amazon EventBridge）のコンソールから選択して設定することで、リソースの状態変化を購読者に通知できる。

![](2024-08-26-16-39-58.png)
### Amazon SNSの基本概念と設定・処理の流れ

#### 1. **Amazon SNSの基本概念**
   - **Amazon SNS (Simple Notification Service)** は、AWSが提供するフルマネージドのメッセージングサービスです。
   - **Pub/Subモデル**（発行者と購読者モデル）を採用しており、システム間でメッセージを配信します。
     - **Publisher（発行者）**: メッセージを送信する側。
     - **Subscriber（購読者）**: メッセージを受け取る側。

#### 2. **基本の流れ**
   - **トピックの作成**
     - トピックは、メッセージのカテゴリやグループを表します。発行者はこのトピックにメッセージを送信し、購読者はこのトピックからメッセージを受け取ります。
     - 例: 「セール情報」というトピックを作成し、そのトピックにセール情報のメッセージを発行します。

   - **Publisherの設定**
     - 発行者は、特定のトピックにメッセージを送信します。例えば、ECサイトのアプリケーションがセール情報をSNSのトピックに送信する場合、そのアプリケーションが発行者となります。
     - 発行者はトピックにメッセージを「パブリッシュ（publish）」します。

   - **Subscriberの設定**
     - 購読者は、受け取りたいトピックを選択し、メッセージを受信するためのプロトコル（HTTP, HTTPS, Email, SMS, SQSなど）を選びます。
     - 例: ユーザーが「セール情報」トピックを購読し、Eメールで通知を受け取りたいと設定します。

#### 3. **設定手順のまとめ**

1. **トピックを作成する**
   - AWS管理コンソールでSNSにアクセスし、新しいトピックを作成します。
   - トピック名を設定し、用途に応じてパラメータを調整します。

2. **Publisherの設定**
   - 作成したトピックにメッセージを発行するアプリケーションやサービスを設定します。
   - アプリケーション側で、SNSトピックにメッセージを送信するロジックを組み込みます。

3. **Subscriberの設定**
   - 購読者がSNSトピックに対して購読を行います。購読には以下のステップがあります:
     1. **トピックを選択**: 購読したいトピックを選びます。
     2. **プロトコルを選択**: メッセージをどの形式（プロトコル）で受信するかを選びます（例: Eメール, SMS, SQS, Lambda関数など）。
     3. **購読を確認**: 多くの場合、購読者は確認メールを受け取り、購読を確定します。

4. **メッセージの発行と受信**
   - 発行者は、作成したトピックにメッセージを送信します。
   - SNSはトピックにサブスクライブしている購読者全員に、設定されたプロトコルでメッセージを配信します。

#### 4. **Pub/Subモデルのメリット**
   - **非同期処理**: 発行者がメッセージを送信してから、購読者がそれを受信するまでの処理が非同期で行われるため、システムの負荷を分散できます。
   - **拡張性**: 1つのトピックに対して複数の購読者がいる場合でも、SNSが自動的にメッセージを全員に配信します。
   - **柔軟性**: 異なるプロトコルを利用して、さまざまなデバイスやサービスにメッセージを配信できます。
